<div class="container mt-5">
  <h1 class="text-center mb-4">User Orders</h1>

  <div class="table-responsive">
    <table class="table table-bordered table-hover table-striped">
      <thead class="thead-dark text-center">
        <tr>
          <th scope="col">User ID</th>
          <th scope="col">Total Amount</th>
          <th scope="col">Payment Method</th>
          <th scope="col">Order Date</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of orders" class="text-center">
          <td>{{ order.userId }}</td>
          <td>${{ order.totalAmount }}</td>
          <td>{{ order.paymentMethod }}</td>
          <td>{{ order.date | date }}</td>
          <td>
            <button class="btn btn-info btn-sm" (click)="getOrderItems(order.id)">View Items</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination controls -->
  <nav aria-label="Page navigation" class="d-flex justify-content-center mt-4">
    <ul class="pagination">
      <li class="page-item" [class.disabled]="currentPage === 1">
        <a class="page-link" href="#" aria-label="Previous" (click)="goToPreviousPage()">
          <span aria-hidden="true">&laquo; Previous</span>
        </a>
      </li>
      <li class="page-item" [class.disabled]="!hasNextPage">
        <a class="page-link" href="#" aria-label="Next" (click)="goToNextPage()">
          <span aria-hidden="true">Next &raquo;</span>
        </a>
      </li>
    </ul>
  </nav>

  <!-- Modal for Order Items -->
  <div class="modal fade" id="orderItemsModal" tabindex="-1" role="dialog" aria-labelledby="orderItemsModalLabel" aria-hidden="true" [ngClass]="{'show': showModal}" style="display: {{ showModal ? 'block' : 'none' }};">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Order Items</h5>
          <button type="button" class="close" (click)="closeModal()">&times;</button>
        </div>
        <div class="modal-body">
          <div class="table-responsive">
            <table class="table table-bordered table-hover">
              <thead class="thead-dark text-center">
                <tr>
                  <th scope="col">Image</th>
                  <th scope="col">Name</th>
                  <th scope="col">Quantity</th>
                  <th scope="col">Price</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let item of selectedOrderItems" class="text-center">
                  <td>
                    <img [src]="'https://localhost:7286/api/Images/getImages/' + item.product.image" alt="{{item.product.name}}" class="img-fluid" style="max-width: 80px;" />
                  </td>
                  <td>{{ item.product.name }}</td>
                  <td>{{ item.quantity }}</td>
                  <td>${{ item.product.price }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Overlay for Modal -->
  <div class="modal-backdrop" [ngClass]="{'show': showModal}" style="display: {{ showModal ? 'block' : 'none' }};"></div>
</div>
